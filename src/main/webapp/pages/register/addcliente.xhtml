<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:body>
    <p:messages id="messages" closable="true">
        <p:autoUpdate/>
    </p:messages>
    <p:growl id="growl" showDetail="true" life="5000"/>
    <p:fieldset legend="Dados Pessoais" toggleable="true" toggleSpeed="500">

        <h:form id="formClienteRegister">
            <p:panelGrid columns="2" >
                <p:row>
                    <p:column colspan="2">
                        <p:outputLabel for="cpf" value="CPF  "/>
                        <p:inputMask id="cpf" value="#{cb.cliente.cpf}" requiredMessage="O cpf não pode ser vazio!" type="text"
                                     mask="999.999.999-99">
                            <f:validateLength maximum="11" for="cpf"/>
                        </p:inputMask>
                    </p:column>
                </p:row>
                <p:row>
                    <p:column colspan="2">
                        <p:outputLabel for="nome" value="Nome"/>
                        <p:inputText id="nome" value="#{cb.cliente.nome}" required="true"
                                     requiredMessage="O nome não pode ser vazio!" type="text">
                            <f:validateLength minimum="2" for="nome"/>
                        </p:inputText>
                    </p:column>
                </p:row>
                <p:row>
                    <p:column colspan="2">
                        <p:outputLabel for="email" value="Email"/>
                        <p:inputText id="email" value="#{cb.cliente.email}" requiredMessage="O email não pode ser vazio!"
                                     type="email"/>
                    </p:column>
                </p:row>
                <p:row>
                    <p:column colspan="2">
                        <p:outputLabel for="telefone" value="Telefone"/>
                        <p:inputMask mask="(99)99999-9999" id="telefone" value="#{cb.cliente.phone}"/>
                    </p:column>
                </p:row>
            </p:panelGrid>
        </h:form>
    </p:fieldset>
    <p:panelGrid columns="2">
        <f:facet name="header">
            <p:graphicImage name="demo/images/misc/kobe.png" />
        </f:facet>

        <h:outputText value="Name:" />
        <h:outputText value="Kobe Bryant" />

        <h:outputText value="Team:" />
        <h:outputText value="Los Angeles Lakers" />

        <h:outputText value="Position:" />
        <h:outputText value="Shooting Guard" />

        <h:outputText value="Number:" />
        <h:outputText value="24" />

        <h:form id="frmBusca">
            <div class="ui-inputgroup">
                <h:outputLabel value="CEP: " for="cep"/>
                <p:inputMask id="cep" mask="99999-999" value="#{cepService.cep}"/>
                <p:commandButton icon="fa fa-search" action="#{cepService.encontraCEP}" styleClass="white-button"
                                 update="frmResult" onstart="PF('loadingCep').show()"
                                 onsuccess="PF('loadingCep').hide()"/>
            </div>
        </h:form>


        <h:form id="frmResult">
                <h:outputLabel value="UF" for="uf"/>
                <p:inputText id="uf" size="5" value="#{cepService.estado}#{cb.cliente.uf}"/>

                <h:outputLabel value="Logradouro" for="logradouro"/>
                <p:inputText size="50" id="logradouro"
                             value="#{cepService.tipoLogradouro}#{cepService.logradouro}#{cb.cliente.logradouro}"/>

                <h:outputLabel value="Cidade" for="cidade"/>
                <p:inputText id="cidade" size="50" value="#{cepService.cidade}#{cb.cliente.municipio}"/>

                <h:outputLabel value="Bairro" for="bairro"/>
                <p:inputText id="bairro" size="25" value="#{cepService.bairro}#{cb.cliente.bairro}"/>

        </h:form>

        <f:facet name="footer">
            <h:form>
                <center><p:commandButton value="Salvar" actionListener="#{cb.save}" ajax="true" icon="fa fa-save"
                                         styleClass="btn-back"
                                         onstart="PF('loadingPage').show()" onsuccess="PF('loadingPage').hide()"
                                         update=":formClienteRegister :frmBusca :frmResult"/>
                </center>
            </h:form>
        </f:facet>
    </p:panelGrid>

    <p:dialog appendTo="@(this)" widgetVar="loadingCep" modal="true" draggable="false" closable="false"
              resizable="false" showHeader="false">
        <center><i class="pi pi-spin pi-spinner" style="font-size: 3em;"></i></center>
        <br/>
        <p:outputLabel value="Carregando..."/>
    </p:dialog>
</h:body>
</html>